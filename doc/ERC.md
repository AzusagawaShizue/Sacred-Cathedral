# Pray1209 技术架构规范：智能合约标准与资产协议 v1.0

## 1. 概述
本章节详细定义了 Pray1209 生态系统中不同类型数字资产所采用的以太坊标准（ERC Standards）。合理的标准选型旨在确保：
*   **经济效率:** 降低用户在祈祷（Mining）和合成（Crafting）过程中的 Gas 消耗。
*   **资产特性:** 准确表达资产的稀缺性、可组合性及唯一性。
*   **互操作性:** 确保资产可无缝接入 OpenSea、Uniswap 等外部 DeFi/NFT 市场。

---

## 2. 核心资产协议

### 2.1. ERC-20: 生态流通货币
**对应资产:** `$GRACE` (恩典代币)

*   **定义:** 同质化代币标准。强调资产的可互换性、可分割性和流动性。
*   **项目应用场景:**
    *   **祈祷产出:** 用户每日祈祷有概率获得微量 $GRACE。
    *   **经济媒介:** 用于购买消耗品（圣烛）、支付合成费用（熔炼）、捐赠给 DAO 功德库。
    *   **流动性:** 可在 DEX (如 Uniswap) 建立流动性池，实现价值发现。
*   **扩展功能:**
    *   **Burnable (可销毁):** 合约需包含 `burn` 函数，用于将合成消耗的代币永久移出流通量，实现通缩。

### 2.2. ERC-1155: 基础素材与消耗品库
**对应资产:** 圣物碎片 (Materials)、普通经文 (Common Scriptures)、消耗品 (Consumables)

*   **定义:** 多重代币标准。允许在单个智能合约中管理多种类型的代币（既可以是同质化也可以是非同质化），支持**批量操作**。
*   **项目应用场景:**
    *   **高频产出:** 用户祈祷会频繁掉落“木头”、“石块”、“羊皮纸残页”。使用 ERC-1155 可避免为每个木头创建一个单独合约，极低成本 Mint。
    *   **堆叠管理:** 用户背包中显示为 `x99 木头`，而非 99 个独立的 NFT 卡片。
    *   **批量合成:** 在“圣座铸造厂”中，用户一次性消耗 `10 木头 + 5 石块` 合成一个祭坛。ERC-1155 的 `safeBatchTransferFrom` 可在一笔交易中完成所有材料扣除，大幅节省 Gas。

### 2.3. ERC-721: 稀有圣物与成品
**对应资产:** 传说级圣物 (Legendary Relics)、铭刻后的成品 (Engraved Items)、用户头像 (Avatars)

*   **定义:** 非同质化代币标准。强调资产的**唯一性**和**不可替代性**，每个 Token 拥有独立的 `TokenID` 和 Metadata。
*   **项目应用场景:**
    *   **独一无二的属性:** 例如“受过祝福的圣杯 #001”，其元数据（Metadata）中记录了它的生成日期、初代持有者以及特殊的视觉特效路径。
    *   **铭刻系统:** 当用户将“经文”铭刻在“十字架”上时，由于铭刻内容因人而异（用户自定义或随机），该物品必须铸造为 ERC-721 以承载其独特的历史记录。

---

## 3. 进阶协议 (Advanced Protocols)

为了实现 Pray1209 的创新玩法（祭坛组合、声誉系统、无感交互），我们将引入以下前沿标准：

### 3.1. ERC-6551: 祭坛即账户 (Token Bound Accounts)
**对应资产:** 个人祈祷室 / 祭坛 (The Altar)

*   **技术背景:** 为每一个 ERC-721 NFT 创建一个智能合约钱包。
*   **项目应用场景:** **可组合的祭坛系统**。
    *   **逻辑:** 用户的“祭坛”本身是一个 NFT。通过 ERC-6551，这个祭坛拥有了自己的钱包地址。
    *   **玩法:** 用户获得的“圣杯”、“十字架”（ERC-721）以及“蜡烛”（ERC-1155）不是放在用户的 MetaMask 个人账号下，而是**转入并存放在“祭坛 NFT”的肚子里**。
    *   **价值:** 当用户想出售整套“毕业级祭坛”时，只需在市场上出售“祭坛 NFT”本身，里面包含的所有装饰品会自动随之转移给买家。实现了真正的“套装交易”。

### 3.2. EIP-5192: 灵魂绑定代币 (SBT)
**对应资产:** 虔诚度证明 (Proof of Piety)、DAO 投票权证

*   **技术背景:** 最小化灵魂绑定接口（Minimal Soulbound NFTs）。一种生成后**不可转让**（Non-transferable）的 NFT。
*   **项目应用场景:** **反作弊与治理权重**。
    *   **逻辑:** 记录用户的总祈祷次数、捐赠历史和连胜纪录。
    *   **目的:** 防止“鲸鱼”用户通过直接购买代币来获得 DAO 的治理权。治理权必须通过实际的“修行”（时间投入）获得。SBT 就像是用户的“修行证书”，一旦铸造绑定钱包，不可出售。

### 3.3. ERC-4337: 账户抽象 (Account Abstraction)
**对应资产:** 用户登录系统 (Wallet Infrastructure)

*   **技术背景:** 智能合约钱包标准，支持社交登录、代付 Gas 等功能。
*   **项目应用场景:** **降低 Web2 用户门槛**。
    *   **逻辑:** 允许“精神追求者”使用 Email 或 Google 账户直接登录 Pray1209。
    *   **体验:** 
        *   **无 Gas 祈祷:** 每日的基础祈祷（点击）操作，后台通过 Paymaster 代付 Gas，用户无需持有 ETH 即可开始体验。
        *   **社交恢复:** 如果用户忘记私钥，可通过社交账号恢复访问权限。

---

## 4. 协议选型汇总表

| 资产名称 | 资产类别 | 采用标准 | 核心理由 |
| :--- | :--- | :--- | :--- |
| **$GRACE** | 生态代币 | **ERC-20** | 通用货币，支持 Burn (销毁) 与流动性挖矿。 |
| **木头/残页/蜡烛** | 基础素材 | **ERC-1155** | 支持批量转账与合成，极大降低高频交互的 Gas 费。 |
| **传说圣物/铭刻品** | 稀有收藏品 | **ERC-721** | 确保资产的唯一 ID 和独立的元数据 (Metadata) 展示。 |
| **个人祭坛 (空间)** | 容器型 NFT | **ERC-6551** | 让祭坛成为拥有背包的容器，实现“资产打包”与“装备系统”。 |
| **虔诚度等级** | 身份凭证 | **SBT (EIP-5192)** | 不可交易，确保 DAO 治理权属于真实的活跃用户。 |
| **用户钱包** | 基础设施 | **ERC-4337** | 提供无助记词登录和代付 Gas 功能，优化 UX。 |